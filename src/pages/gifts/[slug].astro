---
import Layout from "../../layouts/Layout.astro";
import { getGiftIdeas } from "../../lib/gift-service";

export async function getStaticPaths() {
  const ideas = await getGiftIdeas();
  return ideas.map((gift) => ({
    params: { slug: gift.slug },
    props: { gift },
  }));
}

const { gift } = Astro.props;
---

<Layout title={gift.name} description={gift.description}>
  <article class="gift-detail">
    {
      gift.image && (
        <img src={gift.image} alt={gift.name} class="gift-detail__image" />
      )
    }
    <h1 class="gift-detail__title">{gift.name}</h1>
    <p class="gift-detail__description">{gift.description}</p>
    <div class="gift-detail__tags">
      {gift.tags.map((tag) => <span class="gift-detail__tag">{tag}</span>)}
    </div>
    <p class="gift-detail__price">
      Price Range: ${gift.priceRange.min}â€“${gift.priceRange.max}
    </p>
    <a
      href={gift.link}
      target="_blank"
      rel="noopener noreferrer"
      class="gift-detail__link"
    >
      Learn More
    </a>
  </article>
</Layout>

<style>
  .gift-detail {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }

  .gift-detail__image {
    width: 100%;
    max-height: 400px;
    object-fit: cover;
    border-radius: 8px;
    margin-bottom: 2rem;
  }

  .gift-detail__title {
    font-size: 2.5rem;
    margin: 0 0 1rem;
    color: #111827;
  }

  .gift-detail__description {
    font-size: 1.125rem;
    line-height: 1.7;
    color: #4b5563;
    margin-bottom: 2rem;
  }

  .gift-detail__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 2rem;
  }

  .gift-detail__tag {
    padding: 0.5rem 1rem;
    background: #f3f4f6;
    border-radius: 4px;
    font-size: 0.875rem;
    color: #4b5563;
  }

  .gift-detail__price {
    font-size: 1.25rem;
    font-weight: 500;
    color: #111827;
    margin-bottom: 2rem;
  }

  .gift-detail__link {
    display: inline-block;
    padding: 0.75rem 1.5rem;
    background: #111827;
    color: white;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 500;
    transition: background-color 0.2s ease;
  }

  .gift-detail__link:hover {
    background: #1f2937;
  }
</style>
